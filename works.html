<!doctype html>
<html lang="zh-Hant" oncontextmenu="return false">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>精選作品集 | 推手影像製作有限公司 Uprise-Production</title>
<link rel="icon" type="image/png" href="images/uploads/logo.png">
<meta name="description" content="瀏覽 Uprise-Production 的精選作品。">

<link href="https://fonts.googleapis.com/css2?family=Italiana&family=Noto+Sans+TC:wght@300;400;500;700;900&family=Noto+Serif+TC:wght@700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>

<style>
  /* 您的 CSS 樣式保持不變，為了版面簡潔我省略了部分通用樣式，您可以直接沿用原本的 */
  :root { --bg-color: #050505; --brand-primary: #FF8C00; --brand-gradient: linear-gradient(135deg, #FFD700, #FF8C00); }
  body { margin: 0; background-color: var(--bg-color); color: #fff; font-family: 'Noto Sans TC', sans-serif; overflow-x: hidden; }
  
  /* Loading */
  .loader { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s; }
  .loader.hidden { opacity: 0; pointer-events: none; }
  
  /* Header */
  .header { position: fixed; top: 0; width: 100%; padding: 20px 50px; display: flex; justify-content: space-between; z-index: 100; background: rgba(5,5,5,0.9); border-bottom: 1px solid rgba(255,255,255,0.1); }
  .logo img { height: 35px; }
  .nav { display: flex; gap: 30px; }
  .nav a { color: #ccc; text-decoration: none; font-weight: 500; letter-spacing: 1px; transition: 0.3s; }
  .nav a:hover, .nav a.active { color: #FFD700; }

  /* Works Content */
  .works-hero { padding: 150px 20px 80px; text-align: center; }
  .page-title { font-family: 'Noto Serif TC', serif; font-size: 3.5rem; font-weight: 900; background: var(--brand-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px; }
  .page-subtitle { color: #aaa; max-width: 600px; margin: 0 auto; line-height: 1.6; }

  .works-container { max-width: 1200px; margin: 0 auto; padding-bottom: 100px; }
  .category-section { margin-bottom: 80px; padding: 0 40px; }
  .category-title { font-size: 1.8rem; margin-bottom: 40px; border-left: 4px solid var(--brand-primary); padding-left: 20px; font-weight: 700; }
  
  .work-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }
  .work-card { display: block; text-decoration: none; background: rgba(30,30,30,0.5); border-radius: 4px; overflow: hidden; transition: 0.4s; border: 1px solid rgba(255,255,255,0.1); }
  .work-card:hover { transform: translateY(-10px); border-color: var(--brand-primary); box-shadow: 0 20px 40px rgba(0,0,0,0.5); }
  
  .img-box { aspect-ratio: 16/9; overflow: hidden; position: relative; }
  .img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
  .work-card:hover img { transform: scale(1.1); filter: brightness(1.1); }
  
  .content { padding: 20px; }
  .client { font-size: 0.8rem; color: #FFD700; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 5px; }
  .work-title { font-size: 1.2rem; color: #fff; margin: 0; line-height: 1.4; font-weight: 700; }

  @media(max-width: 768px) {
    .header { padding: 20px; flex-direction: column; gap: 15px; }
    .page-title { font-size: 2.5rem; }
    .category-section { padding: 0 20px; }
  }
</style>
</head>
<body>

  <div class="loader"><img src="images/uploads/logo.png" width="80" alt="Loading..."></div>

  <header class="header">
    <a href="index.html" class="logo"><img src="images/uploads/logo.png" alt="Uprise"></a>
    <nav class="nav">
      <a href="index.html">首頁</a>
      <a href="works.html" class="active">作品</a>
      <a href="team.html">團隊</a>
      <a href="about.html">關於</a>
      <a href="contact.html">聯絡</a>
    </nav>
  </header>

  <main>
    <section class="works-hero">
      <h1 class="page-title" id="page-title">精選作品集</h1>
      <p class="page-subtitle" id="page-subtitle">Loading content...</p>
    </section>

    <div class="works-container" id="works-wrapper"></div>
  </main>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <script>
    // --- 這裡就是神奇的地方：自動讀取資料 ---
    document.addEventListener('DOMContentLoaded', () => {
        
        // 1. 去抓取 works.md 的資料
        fetch('content/works.md')
            .then(response => response.text())
            .then(text => {
                // 解析 YAML
                const yamlText = text.replace(/^-{3}([\s\S]+?)-{3}[\s\S]*/, '$1');
                const data = jsyaml.load(yamlText);
                
                // 渲染頁面
                renderPage(data);
                
                // 移除 Loading
                setTimeout(() => {
                    document.querySelector('.loader').classList.add('hidden');
                    AOS.init();
                }, 500);
            })
            .catch(error => {
                console.error('資料讀取失敗:', error);
                document.getElementById('page-subtitle').innerText = "無法讀取資料庫，請檢查 content/works.md";
                document.querySelector('.loader').classList.add('hidden');
            });
    });

    function renderPage(data) {
        // 更新標題
        if(data.title) document.getElementById('page-title').innerText = data.title;
        if(data.subtitle) document.getElementById('page-subtitle').innerText = data.subtitle;

        const wrapper = document.getElementById('works-wrapper');
        wrapper.innerHTML = ''; // 清空

        // 定義您的分類
        const categories = [
            { key: 'portfolio_brand', name: '品牌形象廣告' },
            { key: 'portfolio_product', name: '產品形象廣告' },
            { key: 'portfolio_public', name: '公部門宣傳' },
            { key: 'portfolio_event', name: '活動紀錄' },
            { key: 'portfolio_other', name: '其他作品' }
        ];

        // 產生列表
        categories.forEach(cat => {
            const items = data[cat.key];
            if(items && items.length > 0) {
                let cardsHtml = '';
                
                items.forEach((item, idx) => {
                    // 自動抓取 YouTube 縮圖 (如果沒有設定封面圖)
                    let thumb = item.image;
                    if(!thumb && item.link.includes('youtu')) {
                        const videoId = item.link.match(/(?:youtu\.be\/|youtube\.com\/(?:.*v=|.*\/))([^&?]*)/)?.[1];
                        if(videoId) thumb = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
                    }
                    if(!thumb) thumb = 'images/uploads/logo.png'; // 預設圖

                    cardsHtml += `
                    <a href="${item.link}" target="_blank" class="work-card" data-aos="fade-up" data-aos-delay="${idx * 100}">
                        <div class="img-box">
                            <img src="${thumb}" alt="${item.title}" loading="lazy">
                        </div>
                        <div class="content">
                            <span class="client">${item.client || ''}</span>
                            <h3 class="work-title">${item.title}</h3>
                        </div>
                    </a>`;
                });

                const sectionHtml = `
                <div class="category-section">
                    <div class="category-title">${cat.name}</div>
                    <div class="work-grid">
                        ${cardsHtml}
                    </div>
                </div>`;
                
                wrapper.insertAdjacentHTML('beforeend', sectionHtml);
            }
        });
    }
  </script>
</body>
</html>